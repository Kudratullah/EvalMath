!function(e){function l(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,r)}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){i=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw a}}}}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function r(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function a(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function g(e,r,n){return i(e,r),n}function d(e,r,n){return i(e,r),u(n,"get"),function(e,r){if(r.get)return r.get.call(e);return r.value}(e,n)}function f(e,r,n,t){return i(e,r),u(n,"set"),function(e,r,n){if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(e,n,t),t}function u(e,r){if(void 0===e)throw new TypeError("attempted to "+r+" private static field before its declaration")}function i(e,r){if(e!==r)throw new TypeError("Private static access of wrong provenance")}function w(e,r){for(var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],t=r.length,a=0;a<t;a++){if(n&&r[a]===e)return 1;if(r[a]==e)return 1}}function b(e,r){return r.hasOwnProperty(e)}function y(e,r,n){return(""+e).substr(r,n)}function m(e,r){return e.exec(r)||!1}function k(e){return null===e}function c(e){return!isNaN(e)}function s(e){return!k(e)&&c(e)?(function(e,r){r=(""+e).indexOf(r);return-1!==r&&r}(e,".")?parseFloat:parseInt)(e):null}var x=function(){"use strict";function c(){n(this,c)}return a(c,null,[{key:"evaluate",value:function(e){f(c,c,v,null),e=(""+e).trim(),";"==y(e,-1,1)&&(e=y(e,0,e.length-1));var r=m(/^\s*([a-z]\w*)\s*=\s*(.+)$/g,e),n=m(/^\s*([a-z]\w*)\s*\(\s*([a-z]\w*(?:\s*,\s*[a-z]\w*)*)\s*\)\s*=\s*(.+)$/g,e);if(r){if(w(r[1],d(c,c,_)))return g(c,c,z).call(c,"cannot assign to constant '"+r[1]+"'");var t=g(c,c,h).call(c,g(c,c,p).call(c,r[2]));return!1===t?!1:(d(c,c,A)[r[1]]=t,d(c,c,A)[r[1]])}if(n){if(r=n[1],w(n[1],d(c,c,E)))return g(c,c,z).call(c,"cannot redefine built-in function '"+n[1]+"()'");var a=n[2].replace(/s+/g,"").split(","),u=g(c,c,p).call(c,n[3]);if(!1===u)return!1;for(var i=u.length,l=0;l<i;l++){var o=u[l];if(m(/^[a-z]\w*$/,o)&&!w(o,a)){if(!b(o,d(c,c,A)))return g(c,c,z).call(c,"undefined constiable '"+o+"' in function definition");u[l]=d(c,c,A)[o]}}return d(c,c,$)[r]={args:a,func:u},!0}return g(c,c,h).call(c,g(c,c,p).call(c,e))}}]),c}();function p(e){var r,n,t,a=0,u=new O,i=[];e=(""+e).trim();var l=["+","-","*","/","^","_"],o={"+":0,"-":0,"*":0,"/":0,"^":1},c={"+":0,"-":0,"*":1,"/":1,_:1,"^":2},f=!1;if(v=m(/[^\w\s+*^\/()\.,-]/g,e))return g(x,x,z).call(x,"illegal character '"+v[0]+"'");for(;;){n=y(e,a,1);var s=m(/^([A-Za-z]\w*\(?|\d+(?:\.\d*)?|\.\d+|\()/g,y(e,a)),p=!!s;if("-"!==n||f){if("_"===n)return g(x,x,z).call(x,"illegal character '_'");if((w(n,l)||p)&&f){for(p&&(n="*",a--);0<u.count&&(r=u.last())&&w(r,l)&&(o[n]?c[n]<c[r]:c[n]<=c[r]);)i.push(u.pop());u.push(n),a++,f=!1}else if(")"===n&&f){for(;"("!=(r=u.pop());){if(k(r))return g(x,x,z).call(x,"unexpected ')'");i.push(r)}if(v=m(/^([A-Za-z]\w*)\($/g,u.last(2))){t=v[1];var h=u.pop();if(i.push(u.pop()),w(t,d(x,x,E))){if(1<h)return g(x,x,z).call(x,"too many arguments ("+h+" given, 1 expected)")}else{if(!b(t,d(x,x,$)))return g(x,x,z).call(x,"internal error");if(d(x,x,$)[t].args.length!==h)return g(x,x,z).call(x,"wrong number of arguments ($arg_count given, "+d(x,x,$)[t].args.length+" expected)")}}a++}else if(","===n&&f){for(;"("!==(r=u.pop());){if(k(r))return g(x,x,z).call(x,"unexpected ','");i.push(r)}if(!(v=m(/^([A-Za-z]\w*)\($/g,u.last(2))))return g(x,x,z).call(x,"unexpected ','");u.push(u.pop()+1),u.push("("),a++,f=!1}else if("("!==n||f){if(!p||f)return")"===n?g(x,x,z).call(x,"unexpected ')'"):w(n,l)&&!f?g(x,x,z).call(x,"unexpected operator '"+n+"'"):g(x,x,z).call(x,"an unexpected error occurred");f=!0;var v,s=s[1];(v=m(/^([A-Za-z]\w*)\($/g,s))?w(v[1],d(x,x,E))||b(v[1],d(x,x,$))?(u.push(s),u.push(1),u.push("("),f=!1):(s=v[1],i.push(s)):i.push(s),a+=s.length}else u.push("("),a++}else u.push("_"),a++;if(e.length===a){if(w(n,l))return g(x,x,z).call(x,"operator '"+n+"' lacks operand");break}for(;" "==y(e,a,1);)a++}for(;!k(n=u.pop());){if("("===n)return g(x,x,z).call(x,"expecting ')'");i.push(n)}return i}function h(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!1===e)return!1;var n=new O,t=l(e);try{for(t.s();!(a=t.n()).done;){var a=a.value;if(w(a,["+","-","*","/","^"])){var u=n.pop();if(k(u))return g(x,x,z).call(x,"internal error");var i=n.pop();if(k(i))return g(x,x,z).call(x,"internal error");switch(u=s(u),i=s(i),a){case"+":n.push(i+u);break;case"-":n.push(i-u);break;case"*":n.push(i*u);break;case"/":if(0===u)return g(x,x,z).call(x,"division by zero");n.push(i/u);break;case"^":n.push(pow(i,u))}}else if("_"===a)n.push(-1*n.pop());else if(!m(/^([a-z]\w*)\($/g,a))if(c(a))n.push(a);else if(b(a,d(x,x,A)))n.push(d(x,x,A)[a]);else{if(!b(a,r))return g(x,x,z).call(x,"undefined constiable '"+a+"'");n.push(r[a])}}}catch(e){t.e(e)}finally{t.f()}return 1!==n.count?g(x,x,z).call(x,"internal error"):n.pop()}function z(e){return f(x,x,v,e),console.warn(e),!1}var v={writable:!0,value:null},A={writable:!0,value:{e:2.71,pi:3.14}},$={writable:!0,value:[]},_={writable:!0,value:["e","pi"]},E={writable:!0,value:[]},O=function(){"use strict";function e(){n(this,e),r(this,"stack",[]),r(this,"count",0)}return a(e,[{key:"push",value:function(e){this.stack[this.count]=e,this.count++}},{key:"pop",value:function(){return 0<this.count?(this.count--,this.stack[this.count]):null}},{key:"last",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=this.count-e;return b(e,this.stack)?this.stack[e]:null}}]),e}();e.EvalMath=x}(window);
